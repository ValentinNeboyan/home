<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta http-equiv="Content-Language" content="ru">
<meta http-equiv="Cache-Control" content="private">
<meta http-equiv="Pragma" content="no-cache">
<meta name="keywords" content="php, скрипты php, скачать php, download, скрипты, программирование, mysql, php mysql, apache, сайт php, php apache, установка php, php учебники, форум, форум php, функции php, php5, php6, изучение php, веб-технологии">
<meta http-equiv="Keywords" content="php, скрипты php, скачать php, download, скрипты, программирование, mysql, php mysql, apache, сайт php, php apache, установка php, php учебники, форум, форум php, функции php, php5, php6, изучение php, веб-технологии">
<meta name="description" content="Портал по PHP, MySQL и другим веб-технологиям, Форум PHP программистов">
<meta http-equiv="description" content="Портал по PHP, MySQL и другим веб-технологиям, Форум PHP программистов">
<meta name="Resource-type" content="document">
<meta name="Robots" content="index,follow">
<title>PHP.SU - Пишем класс Template
</title>
<LINK href="/main.css" type=text/css rel=stylesheet>
<script type="text/javascript" src="../main.js"></script>
</head>
<body>
<div align="center">
<!--Header-->
<table width=950 height="60" border=0 align="center" cellpadding=0 cellspacing=0>
  <tr align="left">
    <td valign="middle" class="backgroundlogo">
      <table width="100%" border="0">
        <tr>
          <td align="left" width="200">
            <p class="phpsulogo">&nbsp;&nbsp;
              <a href="http://php.su" style="text-decoration:none" title="Портал по PHP, MySQL и другим веб-технологиям">
                <span class="xq1">PHP</span><span class="xq2">.</span><span class="xq3">SU</span>
              </a>
            </p>
          </td>
          <td>
              <div style="float:left">
              </div>
          </td>
          <td width="20%" valign="middle" align="right" class="backgroundlogo">
            <p class="phpsulogo">
              <a href="http://forum.php.su" style="text-decoration:none" title="Форум портала PHP.SU"><span class="xq2">FORUM<span class="xq2">.</span></span><span class="xq1">PHP</span><span class="xq2">.</span><span class="xq3">SU</span></a>&nbsp;&nbsp;
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<!-- End of Header-->
<!-- Menu -->
<!-- Header Menu -->
<table width="950" cellspacing="0" cellpadding="1" border="0">
  <tr>
    <td bgcolor="#EBEBEB">
      <table width="950" border="0" align="left" cellpadding="3" cellspacing="1">
        <tr>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/">&nbsp;&nbsp;Главная&nbsp;&nbsp;</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/articles/">&nbsp;&nbsp;Статьи&nbsp;&nbsp;</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/learnphp/">Изучение PHP</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/functions/">Функции PHP</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/faq/">FAQ</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/scripts/">PHP скрипты</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/mysql/">MySQL</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/prepare/">Установка</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/books/">Учебники</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/lessons/" title="Уроки на основе обсуждений форума">Уроки</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="/download/">Download</a></b></span>
          </td>
          <td align="center" class="nav" background="/hdrm.gif">
            <span class="navText"><b><a href="http://forum.php.su" title="Форумы портала PHP.SU">&nbsp;&nbsp;Форум&nbsp;&nbsp;</a></b></span>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<!--End of Header Menu-->
<br />
<!--Global table of content-->
<table cellspacing="0" cellpadding="0" width="950" border="0" bgcolor="#D7EAF7">
  <tr>
    <td width="150" valign="top">
      <table cellspacing="0" cellpadding="0" width="150" border="0">
        <tr>
          <td bgcolor="#ffffff">
            <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
              <tr class="bg2">
                <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/php/" style="color:#FFFFFF">Основы PHP</a></span></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?php">&nbsp;&nbsp;<span class="navText2">Что такое PHP?</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?can">&nbsp;&nbsp;<span class="navText2">Возможности PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?opport">&nbsp;&nbsp;<span class="navText2">Преимущества PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?history">&nbsp;&nbsp;<span class="navText2">История развития</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?php5">&nbsp;&nbsp;<span class="navText2">Что нового в PHP5?</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?phpengine">&nbsp;&nbsp;<span class="navText2">«Движок» PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?migration53">&nbsp;&nbsp;<span class="navText2">Переход на PHP 5.3</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/?migration56"><span class="navText2">New&nbsp;Переход на PHP 5.6</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/php/intro/">&nbsp;&nbsp;<span class="navText2">Введение в PHP</span></a></td>
              </tr>
            </table>
            <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
              <tr class="bg2">
                <td width="145" background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/learnphp/" style="color:#FFFFFF">Изучение PHP</a></span></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/cgi/">&nbsp;&nbsp;<span class="navText2">Основы CGI</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/?syntax">&nbsp;&nbsp;<span class="navText2">Синтаксис PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/datatypes/">&nbsp;&nbsp;<span class="navText2">Типы данных PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/vars/">&nbsp;&nbsp;<span class="navText2">Переменные в PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/?const">&nbsp;&nbsp;<span class="navText2">Константы PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/?expressions">&nbsp;&nbsp;<span class="navText2">Выражения PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/operators/">&nbsp;&nbsp;<span class="navText2">Операторы PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/cs/">&nbsp;&nbsp;<span class="navText2">Конструкции PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/?re">&nbsp;&nbsp;<span class="navText2">Ссылки в PHP</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/learnphp/phpoo/">&nbsp;&nbsp;<span class="navText2">PHP и ООП</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/security/">&nbsp;&nbsp;<span class="navText2">Безопасность</span></a></td>
              </tr>
            </table>
            <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
              <tr class="bg2">
                <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/functions/" style="color:#FFFFFF">Функции PHP</a></span></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/functions/?page=cat">&nbsp;&nbsp;<span class="navText2">Функции по категориям</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/functions/?page=abc">&nbsp;&nbsp;<span class="navText2">Функции по алфавиту</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/functions/?page=standard">&nbsp;&nbsp;<span class="navText2">Стандартные функции</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/functions/custom/">&nbsp;&nbsp;<span class="navText2">Пользовательские</span></a></td>
              </tr>
            </table>
            <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
              <tr class="bg2">
                <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/phphttp/" style="color:#FFFFFF">PHP и HTTP</a></span></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/phphttp/forms/">&nbsp;&nbsp;<span class="navText2">Работа с формами</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/phphttp/?uploads">&nbsp;&nbsp;<span class="navText2">PHP и Upload</span></a></td>
              </tr>
              <tr class="bg2">
                <td class="bg"><a href="/phphttp/?cookies">&nbsp;&nbsp;<span class="navText2">PHP и Cookies</span></a></td>
              </tr>
            </table>
          <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
            <tr class="bg2">
              <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/phpdb/" style="color:#FFFFFF">PHP и базы данных</a></span></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/mysql/">&nbsp;&nbsp;<span class="navText2">PHP и MySQL</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/mysql/manual/">&nbsp;&nbsp;<span class="navText2">Документация MySQL</span></a></td>
            </tr>
          </table>
          <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
            <tr class="bg2">
              <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/books/" style="color:#FFFFFF">Учебники</a></span></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/books/?php">&nbsp;&nbsp;<span class="navText2">Учебники по PHP</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/books/?mysql">&nbsp;&nbsp;<span class="navText2">Учебники по MySQL</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/books/">&nbsp;&nbsp;<span class="navText2">Другие учебники</span></a></td>
            </tr>
          </table>

          <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
            <tr class="bg2">
              <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/lessons/" style="color:#FFFFFF">Уроки PHP</a></span></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_0">&nbsp;&nbsp;<span class="navText2">Введение</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_1">&nbsp;&nbsp;<span class="navText2">Самые основы</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_2">&nbsp;&nbsp;<span class="navText2">Управление</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_3">&nbsp;&nbsp;<span class="navText2">Функции</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_4">&nbsp;&nbsp;<span class="navText2">Документация</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_5">&nbsp;&nbsp;<span class="navText2">Математика</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_8">&nbsp;&nbsp;<span class="navText2">Файлы</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_9">&nbsp;&nbsp;<span class="navText2">Основы SQL</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_10">&nbsp;&nbsp;<span class="navText2">Дата и время</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_11">&nbsp;&nbsp;<span class="navText2">CURL</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_12">&nbsp;&nbsp;<span class="navText2">Изображения</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_13">&nbsp;&nbsp;<span class="navText2">Стили</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_14">&nbsp;&nbsp;<span class="navText2">Безопасность</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_15">&nbsp;&nbsp;<span class="navText2">Установка</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_16">&nbsp;&nbsp;<span class="navText2">Проектирование БД</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/lessons/?lesson_17">&nbsp;&nbsp;<span class="navText2">Регулярные выражения</span></a></td>
            </tr>
          </table>

          <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
            <tr class="bg2">
              <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/prepare/" style="color:#FFFFFF">Подготовка к работе</a></span></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/prepare/">&nbsp;&nbsp;<span class="navText2">Быстрый старт</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/prepare/?install_apache_php">&nbsp;&nbsp;<span class="navText2">Установка PHP</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/prepare/?install_mysql">&nbsp;&nbsp;<span class="navText2">Установка MySQL</span></a></td>
            </tr>
            <tr class="bg2">
              <td class="bg"><a href="/prepare/?phpini">&nbsp;&nbsp;<span class="navText2">Конфигурация PHP</span></a></td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
      <tr class="bg2">
        <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/download/" style="color:#FFFFFF">Download / Скачать</a></span></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?apache">&nbsp;&nbsp;<span class="navText2">Скачать Apache</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?php">&nbsp;&nbsp;<span class="navText2">Скачать PHP</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?pecl">&nbsp;&nbsp;<span class="navText2">Скачать PECL</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?pear">&nbsp;&nbsp;<span class="navText2">Скачать PEAR</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?mysql">&nbsp;&nbsp;<span class="navText2">Скачать MySQL</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/editors/">&nbsp;&nbsp;<span class="navText2">Редакторы PHP</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/utilites/">&nbsp;&nbsp;<span class="navText2">Полезные утилиты</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/download/?docs">&nbsp;&nbsp;<span class="navText2">Документация</span></a></td>
      </tr>
    </table>
    <table width="150" border="1" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC">
      <tr class="bg2">
        <td background="/nmdr.gif" bgcolor="#2170ad">&nbsp;&nbsp;<span class="text2"><a href="/scripts/" style="color:#FFFFFF">PHP скрипты</a></span></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/scripts/?download">&nbsp;&nbsp;<span class="navText2">Скачать скрипты</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/instruments/">&nbsp;&nbsp;<span class="navText2">Инструменты</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/articles/?cat=examples">&nbsp;&nbsp;<span class="navText2">PHP в примерах</span></a></td>
      </tr>
      <tr class="bg2">
        <td class="bg"><a href="/news/">&nbsp;&nbsp;<span class="navText2">Новости портала</span></a></td>
      </tr>
    </table>
  </td>
  <!--End of Main Menu--><!--End of Menu-->
<!--MM Spacer-->
<td width="10" bgcolor="#ffffff"></td>
<!-- End of MM Spacer-->
<td width="790" bgcolor="#ffffff" valign="top">
<!--Main Content-->
<!--TBL_HAT-->
<table width="100%" border="0" cellpadding="1" cellspacing="0" bordercolorlight="#CCCCCC" bordercolordark="#FFFFFF">
<tr>
  <td height="8" background="/ndrs.gif" bgcolor="#4D7CCC">
    <span class="hats">
      &nbsp;<a href="/" title="Портал PHP.SU">Главная</a>
      &nbsp;&nbsp;&raquo;&nbsp;&nbsp;<a href="/articles/" title="Сборник статей">Сборник статей</a>    </span>
  </td>
</tr>
</table>
<!--END OF TBL_HAT-->
<table width="100%" border="0" cellpadding="5" cellspacing="1" bgcolor="#4D7CCC">
<tr>
  <td height="1682" valign="top" bgcolor="#F7F7F7">
  <index>
  <!--CONTENT_OF_PAGE-->
  

<a style="font-size:4px">&nbsp;</a><br />
<a style="font-size:1px">&nbsp;</a><br/>
<h2>Пишем класс Template</h2>
<p class="mtx1">Автор: <span style="color:#006633">Андрошук Александр</span></p>
<p>Класс шаблонов это незаменимая часть в форуме, гостевой, 
  чате и т.д. Это класс прост, причём очень прост. Объясню основные функции: 
  загрузка шаблона, обработка в нём переменных и выход шаблона. Давайте 
  рассмотрим подробнее: </p>
<div class="highlight"><p align="left"><font face="courier" color="#152b5f">&lt;?php </font></p>
<p align="left"><font face="courier" color="#152b5f">class template # создали класс </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ # зададим переменные </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $data = array(); # 
  переменная для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $root = '.'; # каталог 
  для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $ext = '.tpl'; # 
  расширение для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $da_vr = array(); # 
  переменная для преобразованых шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">// Класс создан, далее 
  формируем функции: </font> </p>
<p align="left"><font face="courier" color="#152b5f">function 
  template($dir,$ext) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">if(is_dir($dir)){$this 
  -&gt; root = $dir;} </font> </p>
<p align="left"><font face="courier" color="#152b5f">else{die('Ошибка! 
  &lt;b&gt;'.$dir.'&lt;/b&gt; - это не директория!');} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; ext = $ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">// Эта функция выполниется сразу после создания класса, 
  поэтому при создании надо</font></p>
<p align="left"><font face="courier" color="#152b5f"> // указывать директорию и расширения шаблонов (см. 
  ниже). Далее надо загрузить шаблон:</font></p>
<p align="left"><font face="courier" color="#152b5f">function load($name) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$nn = $name; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$dir = $this -&gt; root; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$ext = $this -&gt; ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$name = 
  $dir.'/'.$name.$ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">if(!is_file($name)) 
  {die('Ошибка &lt;b&gt;'.$name.'&lt;/b&gt; - это не файл!');} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$fp = fopen($name,'r'); </font> </p>
<p align="left"><font face="courier" color="#152b5f">$data = 
  fread($fp,filesize($name)); </font> </p>
<p align="left"><font face="courier" color="#152b5f">fclose($fp); </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; data[$nn] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$nm] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">// В этой функции мы считали шаблон через fread и запихнули 
  его в две переменных:</font></p>
<p align="left"><font face="courier" color="#152b5f"> // da_vr и data. При загрузке шаблона надо указывать 
  имя шаблона без расширения</font></p>
<p align="left"><font face="courier" color="#152b5f">// (см.ниже). Далее преобразовываем переменные: </font> </p>
<p align="left"><font face="courier" color="#152b5f">function vars($nm,$vars = 
  array()) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$data = $this -&gt; 
  data[$nm]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">while(list($id,$var) = 
  each($vars)) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">global $$vars[$id]; </font> </p>
<p align="left"><font face="courier" 
      color="#152b5f">$data=str_replace('{'.$vars[$id].'}',$$vars[$id],$data); </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$nm] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">// Тут мы преобразовали 
  переменные и загнали в переменную da_vr. И осталось вывести</font></p>
<p align="left"><font face="courier" color="#152b5f">// шаблон:</font></p>
<p align="left"><font face="courier" color="#152b5f">function out($name) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$ret = $this -&gt; 
  da_vr[$name]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$name] = 
  $this -&gt; data[$name]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">return $ret; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p></div>
<p>После вывода шаблона, все переменные в нём уничтожились, 
  их надо задавать заново. А теперь весь код, чтобы небыло проблем (без комментов): </p>
<div class="highlight"><p align="left"><font face="courier" color="#152b5f">&lt;?php </font> </p>
<p align="left"><font face="courier" color="#152b5f">class template # создали 
  класс </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ # зададим переменные </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $data = array(); # 
  переменная для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $root = '.'; # каталог 
  для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $ext = '.tpl'; # 
  расширение для шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">var $da_vr = array(); # 
  переменная для преобразованых шаблонов </font> </p>
<p align="left"><font face="courier" color="#152b5f">function 
  template($dir,$ext) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">if(is_dir($dir)){$this 
  -&gt; root = $dir;} </font> </p>
<p align="left"><font face="courier" color="#152b5f">else{die('Ошибка! '.$dir.' 
  - это не директория!');} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; ext = $ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">function load($name) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$nn = $name; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$dir = $this -&gt; root; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$ext = $this -&gt; ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$name = 
  $dir.'/'.$name.$ext; </font> </p>
<p align="left"><font face="courier" color="#152b5f">if(!is_file($name)) 
  {die('Ошибка &lt;b&gt;'.$name.'&lt;/b&gt; - это не файл!');} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$fp = fopen($name,'r'); </font> </p>
<p align="left"><font face="courier" color="#152b5f">$data = 
  fread($fp,filesize($name)); </font> </p>
<p align="left"><font face="courier" color="#152b5f">fclose($fp); </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; data[$nn] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$nm] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">function vars($nm,$vars = 
  array()) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$data = $this -&gt; 
  data[$nm]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">while(list($id,$var) = 
  each($vars)) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">global $$vars[$id]; </font> </p>
<p align="left"><font face="courier" 
      color="#152b5f">$data=str_replace('{'.$vars[$id].'}',$$vars[$id],$data); </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$nm] = 
  $data; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">function out($name) </font> </p>
<p align="left"><font face="courier" color="#152b5f">{ </font> </p>
<p align="left"><font face="courier" color="#152b5f">$ret = $this -&gt; 
  da_vr[$name]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$this -&gt; da_vr[$name] = 
  $this -&gt; data[$name]; </font> </p>
<p align="left"><font face="courier" color="#152b5f">return $ret; </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">} </font> </p>
<p align="left"><font face="courier" color="#152b5f">?&gt; </font> </p></div>
<p>Обясню как работать с классом. Допустим у нас есть шаблон 
  body.tpl в директории data. Его содержимое: </p>
<div class="highlight"><p align="left"><font face="courier" color="#152b5f">&lt;!DOCTYPE HTML PUBLIC 
  &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;html&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;head&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;title&gt; {title} 
  &lt;/title&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;/head&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;body 
  bgcolor={bgcolor}&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">{text} </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;/body&gt; </font> </p>
<p align="left"><font face="courier" color="#152b5f">&lt;/html&gt; </font> </p></div>
<p>Работа с классом: </p>
<div class="highlight"><p align="left"><font face="courier" color="#152b5f">include('template.php'); # 
  включили класс </font> </p>
<p align="left"><font face="courier" color="#152b5f"># Зададим переменные # </font> </p>
<p align="left"><font face="courier" color="#152b5f">$bgcolor = '#CCFFCC'; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$text = 'Тест класса!'; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$title = 'ТЕСТ!'; </font> </p>
<p align="left"><font face="courier" color="#152b5f">$tpl = new 
  template('./data','.tpl'); # создали объект, задали каталог и расширение </font> </p>
<p align="left"><font face="courier" color="#152b5f">$tpl -&gt; load('body'); # 
  зашрузили шаблон </font> </p>
<p align="left"><font face="courier" color="#152b5f">$tpl -&gt; 
  vars('body',array('text','title','bgcolor')); # указали какие переменные 
  преобразовать, они должны быть заданы зарание </font> </p>
<p align="left"><font face="courier" color="#152b5f">echo $tpl -&gt; 
  out('body'); # вывели шаблон </font> </p></div>
<p>Всё, я прощаюсь с вами.</p>
<p>Tiger (c) 2004 специально для Web-support.ru.</p>
<a style="font-size:4px">&nbsp;</a><br />

<table width="230" border="0" cellpadding="3" cellspacing="1" bgcolor="#BEBEBE" class="mtx5">
  <tr>
    <td bgcolor="#F4FBFF">&nbsp;<strong style="color:#FF6600">&raquo;</strong> <a href="http://forum.php.su/forums.php?forum=33" target="_blank" style="text-decoration:none">Обсудить эту статью на форуме</a></td>
  </tr>
</table><br>
</index>
<a style="font-size:4px">&nbsp;</a><br />
<table width="300" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#000066" class="mtx1">
<tr>
<td bgcolor="#CAEEFF"><center>&nbsp;<a href="/articles/"><strong>Сборник статей</strong></a>&nbsp;
</center></td>
<td bgcolor="#CAEEFF"><center>&nbsp;<a href="/articles/?cat=examples"><strong>Содержание раздела</strong></a>&nbsp;
</center></td>
</tr>
</table>

  <center>
  <table width="470" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#000066" class="mtx1">
    <tr>
      <td bgcolor="#CAEEFF">
        <center>
          Есть еще вопросы или что-то непонятно - добро пожаловать на наш &nbsp;<a href="http://forum.php.su" title="форум портала PHP.SU" target="_phpsuforum"><b>форум портала <span class="xq1">PHP</span><span class="xq2">.</span><span class="xq3">SU</span></b></a>&nbsp;
        </center>
      </td>
    </tr>
    <tr><td bgcolor="#F7F7F7">&nbsp;</td></tr>
    <tr>
      <td bgcolor="#CAEEFF">
        <table width="100%">
        <tr>
          <td width="100%">
            <script type="text/javascript">
            window.vkAsyncInit = function() {
              VK.init({apiId: 2254330, onlyWidgets: true});
              VK.Widgets.Like('vk_like', {pageUrl: 'http://php.su', type: 'button'});
            }
            </script>
            <span id="vk_like"></span>
            <span class="g-plusone" data-href="http://php.su"></span>
            <a href="http://twitter.com/share" class="twitter-share-button" data-lang="ru" data-url="http://php.su">Tweet</a>
          </td>
        </tr>
        <tr>
          <td width="100%">
            <span class="fb-like" data-href="http://www.php.su" data-layout="button_count" data-action="recommend" data-send="true"></span>
          </td>
        </tr>
        </table>
      </td>
    </tr>
  </table>
  </center>
  </index>
  </td>
</tr>

<tr>
  <td valign="bottom" bgcolor="#F7F7F7">
    <center>
<script type="text/javascript"><!--
google_ad_client = "pub-6731571838950830";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text";
google_ad_channel ="8345202312";
google_color_border = "F7F7F7";
google_color_link = "0066CC";
google_color_bg = "F7F7F7";
google_color_text = "000000";
google_color_url = "0066CC";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>
<br />
    <!--EOF_CONTENT_OF_PAGE-->
  </td>
</tr>
</table>
<!--End of main Content-->
</td>
</tr></table>
<!--End global table of content-->
<a>&nbsp;</a>
<!--Footer-->
<table cellspacing="0" cellpadding="4" width="950" border="0">
  <tr>
    <td class="footer" align="center" background="/ftrs.gif" >
    &nbsp;&nbsp;<span class="footertext">&copy; 2006 - 2018 &nbsp;<a href="http://www.php.su" title="Портал PHP.SU"><span style="color:#003399"><b>PHP</b></span><span style="color:#009900"><b>.</b></span><span style="color:#FF0000"><b>SU</b></span></a> |
      <a href="/project/?about" title="О проекте PHP.SU">О проекте</a> |
      <a href="/gm/" target="_blank" title="Гостевая книга">Гостевая книга</a> |
      <a href="/feedback/" target="_blank" title="Обратная связь с администрацией">Обратная связь</a> |
      <a href="#" onclick='window.external.AddFavorite(location.href, document.title);return false'>Добавить в избранное</a> |
      <a href="/project/?buttons" title="Кнопки портала">Наши кнопки</a> |
      <a href="/project/?policy" title="Политика проекта">Политика проекта</a> |
      <a href="#" onclick='window.external.AddFavorite(location.href, document.title);return false'>Добавить в избранное</a> |
      <a href="map.html">sitemap</a> |
    </span>
    </td>
  </tr>
</table>
<!--End of Footer-->
</div>
<div align="center">
  <table cellspacing="0" cellpadding="4" width="950" border="0">
    <tr>
      <td align="center">
        <a href="http://www.php.net" title="Powered by PHP" target="_blank"><img src="/forum/templates/InvisionExBB/im/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>&nbsp;
        <a href="http://www.mysql.com/" target="_blank"><img src="/forum/templates/InvisionExBB/im/mysql.png" alt="Powered By MySQL" /></a>&nbsp;
        <a href="http://nginx.org" target="_blank"><img src="/forum/templates/InvisionExBB/im/nginxpowered.png" alt="Powered by Nginx"></a>&nbsp;
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="_blank"><img src="/forum/templates/InvisionExBB/im/button-css.png" width="80" height="15" alt="Valid CSS" /></a>&nbsp;
      </td>
    </tr>
    <tr>
      <td class="footer" align="center" background="/ftrs.gif" >
        &nbsp;<font size="1">Наши партнеры:</font> <span class="footertext"></span>
      </td>
    </tr>
  </table>
</div>

<div align="center">
<noindex>
<!--LiveInternet counter--><script type="text/javascript"><!--
document.write('<a href="http://www.liveinternet.ru/click" '+
'target=_blank><img src="http://counter.yadro.ru/hit?t15.1;r'+
escape(document.referrer)+((typeof(screen)=='undefined')?'':
';s'+screen.width+'*'+screen.height+'*'+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+';u'+escape(document.URL)+
";h"+escape(document.title.substring(0,80))+';'+Math.random()+
'" alt="" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодн\я" '+
'border=0 width=87 height=30><\/a>')//--></script><!--/LiveInternet-->
&nbsp;
<!--Rating@Mail.ru counter-->
<script language="javascript" type="text/javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer);js=10;//--></script>
<script language="javascript1.1" type="text/javascript"><!--
a+=';j='+navigator.javaEnabled();js=11;//--></script>
<script language="javascript1.2" type="text/javascript"><!--
s=screen;a+=';s='+s.width+'*'+s.height;
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth);js=12;//--></script>
<script language="javascript1.3" type="text/javascript"><!--
js=13;//--></script><script language="javascript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=1079531" target="_blank">'+
'<img src="http://d8.c7.b0.a1.top.mail.ru/counter?id=1079531;t=52;js='+js+
a+';rand='+Math.random()+'" alt="Рейтинг@Mail.ru" border="0" '+
'height="30" width="87"><\/a>');if(11<js)d.write('<'+'!-- ');//--></script>
<noscript><a target="_blank" href="http://top.mail.ru/jump?from=1079531">
<img src="http://d8.c7.b0.a1.top.mail.ru/counter?js=na;id=1079531;t=52" 
height="30" width="87" border="0" alt="Рейтинг@Mail.ru"></a></noscript>
<script language="javascript" type="text/javascript"><!--
if(11<js)d.write('--'+'>');//--></script>
<!--// Rating@Mail.ru counter-->
</noindex>
&nbsp;&nbsp;&nbsp;</div></body>
</html>